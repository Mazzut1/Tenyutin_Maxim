# Практическая работа №5
**Тема:** Использование аппаратных возможностей мобильных устройств: сенсоры, механизм разрешений, камера и микрофон в Android-приложениях
**Цель работы**
В практике были закреплены следующие навыки:
- получение списка всех доступных сенсоров на устройстве;
- считывание и отображение в реальном времени данных с акселерометра;
- запрос опасных разрешений у пользователя (runtime permissions) и корректная их обработка;
- интеграция системного приложения камеры с сохранением фотографии через FileProvider;
- работа с микрофоном: запись аудио с помощью MediaRecorder и воспроизведение через MediaPlayer;
- объединение всех компонентов (сенсоры, камера, диктофон) в единый проект — MireaProject.
## Получение списка сенсоров устройства
Создан модуль в проекте ru.mirea.tenyutin.lesson5, реализующий сбор информации обо всех доступных датчиках устройства.
*Что было сделано:*
- Использован SensorManager для получения списка сенсоров.
- В макете activity_main.xml размещён ListView, в который через адаптер передаются данные:
    - Name — имя сенсора;
    - Value — максимальное измеряемое значение.
- При запуске активности список сенсоров отображается пользователю в виде таблицы.
![image](https://github.com/user-attachments/assets/76cea76e-d49b-4791-9664-e72d095ef78a)
**Результат:** пользователь может ознакомиться с полным перечнем аппаратных и виртуальных сенсоров своего устройства, таких как: гироскоп, датчик освещённости, шагомер и т.д.
## Работа с акселерометром
Создан модуль Accelerometer, в котором реализовано получение данных с датчика ускорения.
*Реализация:*
- Активность реализует интерфейс SensorEventListener.
- В методе onResume() происходит регистрация слушателя на сенсор TYPE_ACCELEROMETER.
- В onPause() слушатель отключается во избежание утечки ресурсов.
- В интерфейсе отображаются значения по осям X, Y и Z в реальном времени (обновление с каждым событием onSensorChanged()).
![image](https://github.com/user-attachments/assets/90a988e8-df64-4298-9469-aad75f6a5796)
**Результат:** данные акселерометра считываются и отображаются в текстовых полях с высокой точностью, обновляясь при каждом изменении положения устройства.
## Работа с камерой
Создан модуль Camera, демонстрирующий вызов встроенного приложения камеры.
*Что было реализовано:*
- Использовано неявное намерение MediaStore.ACTION_IMAGE_CAPTURE для запуска камеры.
- Для передачи URI файла использован FileProvider.
- В манифест (AndroidManifest.xml) добавлен provider с путями, определёнными в res/xml/paths.xml.
- После съёмки снимок сохраняется в хранилище и отображается на экране внутри ImageView.
![image](https://github.com/user-attachments/assets/bb6a8e54-2b2e-43fb-87e7-385106e150f5)
![image](https://github.com/user-attachments/assets/5cc18c42-071c-4b14-a079-38d88157c4e8)
![image](https://github.com/user-attachments/assets/e9c256d2-3640-445a-8a79-1121f573ea56)
**Результат:** при нажатии на кнопку запускается камера, пользователь делает фото, которое затем выводится в интерфейсе приложения.
## Запись и воспроизведение аудио
Модуль AudioRecord реализует простой диктофон.
Функциональность:
- Использован MediaRecorder для записи звука.
- Аудиофайл сохраняется в формате .3gp во внутренней директории.
- После завершения записи активируется кнопка «Воспроизвести», по нажатию на которую аудиофайл проигрывается с использованием MediaPlayer.
- Реализована корректная остановка и освобождение ресурсов как для записи, так и для воспроизведения.
![image](https://github.com/user-attachments/assets/1262959f-8b44-4078-af62-0895edee1323)
![image](https://github.com/user-attachments/assets/b2a7901c-f12e-4cca-bcef-b61daee3c25e)
![image](https://github.com/user-attachments/assets/07b4de5a-82cb-47db-a99c-721aa038bc5d)
![image](https://github.com/user-attachments/assets/c354d48f-3dab-4620-971d-19cea3dc3516)
**Результат:** пользователь может записать голос, сохранить запись и тут же её прослушать.
## Итог по отдельным модулям
В результате работы над проектом были реализованы:
- динамический вывод списка всех сенсоров устройства;
- визуализация работы акселерометра;
- безопасная работа с камерой и сохранение изображения;
- реализация диктофона с циклом записи-проигрывания;
- работа с разрешениями CAMERA, RECORD_AUDIO, WRITE_EXTERNAL_STORAGE с использованием актуальных методов запроса (ActivityCompat.requestPermissions() и onRequestPermissionsResult()).
# Интеграция в MireaProject
В основной проект **MireaProject** добавлены три новых фрагмента, каждый из которых отвечает за определённую функцию:
![image](https://github.com/user-attachments/assets/0c270eba-4017-4259-b22d-f90533692cd7)
## SensorFragment
- Используются сенсоры: акселерометр и магнитный компас (TYPE_ACCELEROMETER, TYPE_MAGNETIC_FIELD).
- Вычисляется направление на север, которое выводится в градусах.
- В интерфейсе отображается угол, а также обновляются данные при изменении положения устройства.
![image](https://github.com/user-attachments/assets/b2502d66-5764-42cb-9324-a2baf3a14a69)
## CameraFragment
- Используется встроенное приложение камеры, запускаемое через Intent.
- Снимок сохраняется через FileProvider, затем автоматически отображается на экране (ImageView).
![image](https://github.com/user-attachments/assets/b7d291ec-e54a-481e-b8cd-1cd9bdd1dbc0)
## MicrophoneFragment
- Реализован процесс записи аудио при помощи MediaRecorder.
- После завершения записи становится доступной кнопка «Воспроизвести», активирующая MediaPlayer.
- Интерфейс адаптирован под жизненный цикл: все ресурсы освобождаются, исключены утечки памяти.
![image](https://github.com/user-attachments/assets/e0137ed9-6070-423f-a570-80b0223e8f9b)
![image](https://github.com/user-attachments/assets/840640f6-9ae5-48e2-a634-868dd8c54026)
![image](https://github.com/user-attachments/assets/cac5c1b5-7b1e-4740-94f8-66394c97be5c)
## Дополнительно
В каждом фрагменте реализованы проверки разрешений:
- CAMERA — для доступа к камере;
- RECORD_AUDIO — для использования микрофона;
- WRITE_EXTERNAL_STORAGE — для сохранения медиафайлов.
## Заключение
Практическая работа №5 позволила не только углубить знания о работе с аппаратными компонентами Android-устройств, но и на практике реализовать:
- обработку сенсоров и их отображение;
- реализацию потоковых данных с датчиков;
- работу с камерой и сохранением файлов;
- работу с аудиозаписью и воспроизведением;
- управление разрешениями и взаимодействие с системными компонентами.
Все модули интегрированы в основной проект, протестированы и функционируют стабильно.

---

**Работу выполнил**: Тенютин М.М  
**Группа**: БСБО-09-22


