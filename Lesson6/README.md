# Практическая работа №6
**Тема:** Хранение пользовательских данных с помощью SharedPreferences и файловая работа в Android-приложениях  
**Цель работы**
Данная работа направлена на закрепление навыков:
- работы с обычными и защищёнными пользовательскими настройками (SharedPreferences, EncryptedSharedPreferences);
- сохранения и чтения текстовых данных в локальные файлы;
- хранения информации во внутреннем и внешнем хранилищах устройства;
- создания и использования локальной базы данных SQLite с применением библиотеки Room;
- интеграции всех решений в учебное Android-приложение MireaProject.
## Работа с SharedPreferences
**Интерфейс:**
- Три поля ввода:
    - Номер группы;
    - Порядковый номер студента в списке;
    - Любимый фильм или сериал.
- Кнопка «Сохранить» сохраняет данные в локальные настройки.
**Реализация:**
- Использован метод getSharedPreferences("mirea_settings", MODE_PRIVATE).
- При следующем запуске приложения данные автоматически подгружаются и отображаются в полях.
- Состояние настроек фиксируется также в виде XML-файла, что подтверждено скриншотом содержимого в папке raw.
![image](https://github.com/user-attachments/assets/b8f33ab4-c79a-445f-8dc6-471d80bfe5de)
![image](https://github.com/user-attachments/assets/e1ff9dd9-a3be-4013-9b73-987dcf35e78f)
**Результат:** простой механизм хранения пользовательских данных без необходимости постоянного взаимодействия с базой данных.
## Защищённые настройки (EncryptedSharedPreferences)
Создан модуль SecureSharedPreferences, в котором демонстрируется безопасное хранение конфиденциальной информации.
*Что реализовано:*
- Подключена библиотека androidx.security:security-crypto:1.0.0.
- Сгенерирован мастер-ключ через MasterKeys.getOrCreate(...).
- Создан объект EncryptedSharedPreferences.create(...), хранящий:
- имя любимого поэта;
- путь к изображению (возможно, с цитатой или биографией).
- Скриншот содержимого зашифрованного XML-файла (с нечитаемым содержимым) помещён в raw.
![image](https://github.com/user-attachments/assets/a8ca13fc-35b7-4f99-8b9d-48a1c06f393a)
**Результат:** данные шифруются на уровне платформы, что исключает возможность их перехвата или несанкционированного чтения.
## Работа с файлами: Внутреннее файловое хранилище
Модуль InternalFileStorage демонстрирует запись и чтение текстовых данных во внутреннюю память приложения.
Пример:
- При нажатии кнопки «Сохранить» создаётся файл history.txt.
- Использован метод openFileOutput() для записи.
- Файл сохраняется в каталоге приложения, недоступном другим программам.
![image](https://github.com/user-attachments/assets/9e4bc2b6-29b6-4f9e-b814-b43c92e95a73)
**Дополнительно:** скриншот файла history.txt представлен в raw, подтверждая его наличие и корректное форматирование.
![image](https://github.com/user-attachments/assets/f9e604e3-17b6-4927-9989-868dac7d1949)
![image](https://github.com/user-attachments/assets/bb43994d-14b8-4b37-a365-45fcd8e26d5c)
## Notebook: Публичное файловое хранилище
Создан модуль Notebook, в котором реализовано небольшое приложение «Записная книжка».
Функции:
- Два текстовых поля:
    - Название файла;
    - Текст цитаты.
- Две кнопки: «Сохранить» и «Загрузить».
- Данные сохраняются в Environment.DIRECTORY_DOCUMENTS — доступный пользователю каталог.
- При чтении данных текст восстанавливается в поля ввода.
![image](https://github.com/user-attachments/assets/6ec7b66d-4e04-4f61-89ce-f373f8d1d0c2)
![image](https://github.com/user-attachments/assets/52b74515-b0e3-4177-a60d-32a1eae4ff08)
![image](https://github.com/user-attachments/assets/b7dc527e-a860-4371-88ef-9cb4ea49d32c)
**Примеры:** сохранены две цитаты известных личностей, каждая в отдельном файле. Скриншоты файлов добавлены в папку raw.
## Модуль EmployeeDB
В модуле EmployeeDB продемонстрирована работа с SQLite через библиотеку Room.
**Структура:**
•	Класс Hero — содержит поля name, power, rating.
•	Интерфейс HeroDao — включает методы @Insert, @Query, @Update, @Delete.
•	HeroDatabase — класс, расширяющий RoomDatabase, версия 1.
•	App — класс, инициализирующий БД через Room.databaseBuilder(...).
**UI:**
•	В MainActivity представлены кнопки для добавления, изменения, удаления и чтения записей.
•	Пользователь может управлять «супергероями» и видеть обновлённые данные в списке.
![image](https://github.com/user-attachments/assets/b6a30102-f016-4951-9460-4541def59c63)
![image](https://github.com/user-attachments/assets/8fdfc7c0-7588-4c92-83c2-acab5cb5061c)
![image](https://github.com/user-attachments/assets/91d9161d-dca0-47f6-a597-78e325f648e2)
![image](https://github.com/user-attachments/assets/efcaa4e8-329a-4654-aae4-149d77748e60)
**Результат:** создана полноценная локальная БД с CRUD-операциями в многотабличной архитектуре.
# Интеграция в MireaProject
В рамках проекта MireaProject были добавлены два новых фрагмента:
**Фрагмент «Профиль»**
- Экран содержит поля для ввода имени и номера группы.
- Данные сохраняются с использованием SharedPreferences.
- При следующем входе на экран они автоматически подставляются в поля.
- Интерфейс включает EditText и Button, размещён на ConstraintLayout.
**Фрагмент «Файлы»**
- Список всех созданных пользователем файлов отображается в RecyclerView.
- Используется FloatingActionButton для создания нового файла:
      - При нажатии появляется диалоговое окно с полями «Имя файла» и «Содержимое».
- Нажатие на файл вызывает AlertDialog, отображающий содержимое в удобном для чтения формате.
*Реализация включает:*
- проверку разрешений;
- сохранение в локальное хранилище;
- адаптацию интерфейса под различные размеры экрана.
![image](https://github.com/user-attachments/assets/07291c02-4ae5-46a3-9006-32e1fbc6d548)
![image](https://github.com/user-attachments/assets/fb123d76-91ea-4350-92f9-e153e66c8bce)
![image](https://github.com/user-attachments/assets/c7660ca1-ff7c-4d02-a22a-e4602f75e758)
![image](https://github.com/user-attachments/assets/5bed55e3-99b6-4a92-9eed-fa09135b5c25)
![image](https://github.com/user-attachments/assets/c8663c48-0836-49d7-ab3a-a4f62dcbd4c2)
![image](https://github.com/user-attachments/assets/e917ab14-9126-4aed-a382-009f93bc9403)
## Итог работы
В ходе выполнения практической работы №6 были получены и закреплены следующие навыки:
- настройка и использование обычных и зашифрованных настроек;
- чтение и запись во внутренние и внешние файлы;
- создание приложений, работающих с пользовательскими текстовыми заметками;
- реализация базы данных SQLite с помощью Room;
- интеграция всех функций в учебный проект с продуманной навигацией и адаптивным интерфейсом.

---

**Работу выполнил**: Тенютин М.М  
**Группа**: БСБО-09-22
